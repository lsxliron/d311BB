define(["d3","jquery"],function(e,t){return{wrap:function(t,n){t.each(function(){var t=e.select(this),r=t.text().split(/\s+/).reverse(),i,s=[],o=0,u=1.1,a=t.attr("y"),f=parseFloat(t.attr("dy")),l=t.text(null).append("tspan").attr("x",0).attr("y",a).attr("dy",f+"em");while(i=r.pop())s.push(i),l.text(s.join(" ")),l.node().getComputedTextLength()>n&&(s.pop(),l.text(s.join(" ")),s=[i],l=t.append("tspan").attr("x",1).attr("y",a).attr("dy",++o*u+f+"em").text(i))})}}});